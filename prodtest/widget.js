(function(e){var t=window.laike9mdev?"":"https://cdn.rawgit.com/laike9m/zhihu-card/master/prodtest/";var r,a=0;var i,n,d,h;function s(t){if(e.querySelectorAll){return e.querySelectorAll("."+t)}var a=e.getElementsByTagName("div");var i=[];for(r=0;r<a.length;r++){if(~a[r].className.split(" ").indexOf(t)){i.push(a[r])}}return i}function u(e,t){return e.getAttribute("data-"+t)}function l(e){if(window.addEventListener){window.addEventListener("message",function(t){if(e.id===t.data.sender){e.height=t.data.height}},false)}}function o(r){var i=u(r,"theme")||"zhihu";cardurl=t+"theme/"+i+".html";var n=u(r,"userhash");if(!n){return}a+=1;var d=u(r,"width");var h=u(r,"height");var s=u(r,"key1")||"answer";var o=u(r,"key2")||"agree";var c=u(r,"key3")||"follower";var v=u(r,"button")||"yes";var f=u(r,"description")||"yes";var m="zhcard-"+n+"-"+a;var g=e.createElement("iframe");g.setAttribute("id",m);g.setAttribute("frameborder",0);g.setAttribute("scrolling",0);g.setAttribute("allowtransparency",true);var y=cardurl+"?userhash="+n+"&identity="+m+"&button="+v+"&description="+f;y+="&key1="+s+"&key2="+o+"&key3="+c;g.src=y;g.width=d||Math.min(r.parentNode.clientWidth||400,400);if(h){g.height=h}l(g);r.parentNode.replaceChild(g,r);return g}var c=s("zhihu-card");for(r=0;r<c.length;r++){o(c[r])}})(document);
